---
version: 2

builds:
  - env:
      - CGO_ENABLED=0
    goos:
      - darwin
    goarch:
      - amd64
      - arm64
    flags:
      - -trimpath
    ldflags:
      - -s -w -X main.version={{.Tag}} -X main.Date={{.CommitDate}}
    mod_timestamp: '{{.CommitTimestamp}}'

checksum:
  name_template: 'checksums.txt'

snapshot:
  version_template: '{{ .Tag }}-snapshot-{{ .ShortCommit }}'

changelog:
  use: github-native

release:
  # If set to auto, will mark the release as not ready for production
  # in case there is an indicator for this in the tag e.g. v1.0.0-rc1
  # If set to true, will mark the release as not ready for production.
  # Default is false.
  prerelease: auto

brews:
  - repository:
      owner: arnested
      name: homebrew-ssh2iterm2
    directory: Formula
    homepage: "https://github.com/arnested/ssh2iterm2"
    description: "Create iTerm2 dynamic profile from SSH config"
    install: |
      bin.install "ssh2iterm2"
    service: |
      run [opt_bin/"ssh2iterm2", "watch"]
      keep_alive true
